var T,loiot=T={};loiot.version="1.0.0";loiot.guid="$LOIOT$";loiot.key="loiot_guid";var _=window[loiot.guid]=window[loiot.guid]||{};(_.versions||(_.versions=[])).push(loiot.version);loiot.check=loiot.check||function(){};loiot.lang=loiot.lang||{};loiot.forEach=function(enumerable,iterator,context){var i,n,t;if(typeof iterator=="function"&&enumerable){n=typeof enumerable.length=="number"?enumerable.length:enumerable.byteLength;if(typeof n=="number"){if(Object.prototype.toString.call(enumerable)==="[object Function]"){return enumerable}for(i=0;i<n;i++){t=enumerable[i]||(enumerable.charAt&&enumerable.charAt(i));iterator.call(context||null,t,i,enumerable)}}else{if(typeof enumerable=="number"){for(i=0;i<enumerable;i++){iterator.call(context||null,i,i,i)}}else{if(typeof enumerable=="object"){for(i in enumerable){if(enumerable.hasOwnProperty(i)){iterator.call(context||null,enumerable[i],i,enumerable)}}}}}}return enumerable};loiot.type=(function(){var objectType={},nodeType=[,"HTMLElement","Attribute","Text",,,,,"Comment","Document",,"DocumentFragment",],str="Array Boolean Date Error Function Number RegExp String",retryType={object:1,"function":"1"},toString=objectType.toString;loiot.forEach(str.split(" "),function(name){objectType["[object "+name+"]"]=name.toLowerCase();loiot["is"+name]=function(unknow){return loiot.type(unknow)==name.toLowerCase()}});return function(unknow){var s=typeof unknow;return !retryType[s]?s:unknow==null?"null":unknow._type_||objectType[toString.call(unknow)]||nodeType[unknow.nodeType]||(unknow==unknow.window?"Window":"")||"object"}})();loiot.isDate=function(unknow){return loiot.type(unknow)=="date"&&unknow.toString()!="Invalid Date"&&!isNaN(unknow)};loiot.isElement=function(unknow){return loiot.type(unknow)=="HTMLElement"};loiot.isEnumerable=function(unknow){return unknow!=null&&(typeof unknow=="object"||~Object.prototype.toString.call(unknow).indexOf("NodeList"))&&(typeof unknow.length=="number"||typeof unknow.byteLength=="number"||typeof unknow[0]!="undefined")};loiot.isNumber=function(unknow){return loiot.type(unknow)=="number"&&isFinite(unknow)};loiot.isPlainObject=function(unknow){var key,hasOwnProperty=Object.prototype.hasOwnProperty;if(loiot.type(unknow)!="object"){return false}if(unknow.constructor&&!hasOwnProperty.call(unknow,"constructor")&&!hasOwnProperty.call(unknow.constructor.prototype,"isPrototypeOf")){return false}for(key in unknow){}return key===undefined||hasOwnProperty.call(unknow,key)};loiot.isObject=function(unknow){return typeof unknow==="function"||(typeof unknow==="object"&&unknow!=null)};loiot.extend=function(depthClone,object){var second,options,key,src,copy,i=1,n=arguments.length,result=depthClone||{},copyIsArray,clone;loiot.isBoolean(depthClone)&&(i=2)&&(result=object||{});!loiot.isObject(result)&&(result={});for(;i<n;i++){options=arguments[i];if(loiot.isObject(options)){for(key in options){src=result[key];copy=options[key];if(src===copy){continue}if(loiot.isBoolean(depthClone)&&depthClone&&copy&&(loiot.isPlainObject(copy)||(copyIsArray=loiot.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&loiot.isArray(src)?src:[]}else{clone=src&&loiot.isPlainObject(src)?src:{}}result[key]=loiot.extend(depthClone,clone,copy)}else{if(copy!==undefined){result[key]=copy}}}}}return result};loiot.createChain=function(chainName,fn,constructor){var className=chainName=="dom"?"$DOM":"$"+chainName.charAt(0).toUpperCase()+chainName.substr(1);var slice=Array.prototype.slice;var chain=loiot[chainName]=loiot[chainName]||fn||function(object){return loiot.extend(object,loiot[chainName].fn)};chain.extend=function(extended){var method;for(method in extended){if(method!="splice"){chain[method]=function(){var id=arguments[0];chainName=="dom"&&loiot.type(id)=="string"&&(id="#"+id);var object=chain(id);var result=object[method].apply(object,slice.call(arguments,1));return loiot.type(result)=="$DOM"?result.get(0):result}}}return loiot.extend(loiot[chainName].fn,extended)};loiot[chainName][className]=loiot[chainName][className]||constructor||function(){};chain.fn=loiot[chainName][className].prototype;return chain};loiot.overwrite=function(Class,list,fn){for(var i=list.length-1;i>-1;i--){Class.prototype[list[i]]=fn(list[i])}return Class};loiot.merge=function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first};loiot.each=function(enumerable,iterator,context){var i,n,t,result;if(typeof iterator=="function"&&enumerable){n=typeof enumerable.length=="number"?enumerable.length:enumerable.byteLength;if(typeof n=="number"){if(Object.prototype.toString.call(enumerable)==="[object Function]"){return enumerable}for(i=0;i<n;i++){t=enumerable[i]||(enumerable.charAt&&enumerable.charAt(i));result=iterator.call(context||t,i,t,enumerable);if(result===false||result=="break"){break}}}else{if(typeof enumerable=="number"){for(i=0;i<enumerable;i++){result=iterator.call(context||i,i,i,i);if(result===false||result=="break"){break}}}else{if(typeof enumerable=="object"){for(i in enumerable){if(enumerable.hasOwnProperty(i)){result=iterator.call(context||enumerable[i],i,enumerable[i],enumerable);if(result===false||result=="break"){break}}}}}}}return enumerable};loiot.lang.isArray=loiot.isArray;loiot.lang.isObject=loiot.isObject;loiot.lang.isFunction=loiot.isFunction;loiot.makeArray=function(array,results){var ret=results||[];if(!array){return ret}array.length==null||~"string|function|regexp".indexOf(loiot.type(array))?[].push.call(ret,array):loiot.merge(ret,array);return ret};loiot.global=loiot.global||(function(){var me=loiot._global_=window[loiot.guid],global=me._=me._||{};return function(key,value,overwrite){if(typeof value!="undefined"){overwrite||(value=typeof global[key]=="undefined"?value:global[key]);global[key]=value}else{if(key&&typeof global[key]=="undefined"){global[key]={}}}return global[key]}})();loiot.regexp=loiot.regexp||function(maps){var modalReg=/[^mig]/;return function(reg,modal){var key,result;if(loiot.isString(reg)){modalReg.test(modal)&&(modal="");key=reg+"$$"+(modal||"");(result=maps[key])||(result=maps[key]=new RegExp(reg,modal))}else{if(loiot.isRegExp(reg)){modal=(reg.global?"g":"")+(reg.ignoreCase?"i":"")+(reg.multiline?"m":"");key=reg.source+"$$"+modal;result=maps[key]||(maps[key]=reg)}}(result||(result=reg))&&reg.lastIndex>0&&(reg.lastIndex=0);return result}}(loiot.global("_maps_RegExp"));loiot.createChain("array",function(array){var pro=loiot.array.$Array.prototype,ap=Array.prototype,key;loiot.type(array)!="array"&&(array=[]);for(key in pro){ap[key]||(array[key]=pro[key])}return array});loiot.overwrite(loiot.array.$Array,"concat slice".split(" "),function(key){return function(){return loiot.array(Array.prototype[key].apply(this,arguments))}});loiot.array.extend({indexOf:function(match,fromIndex){loiot.check(".+(,number)?","loiot.array.indexOf");var len=this.length;(fromIndex=fromIndex|0)<0&&(fromIndex=Math.max(0,len+fromIndex));for(;fromIndex<len;fromIndex++){if(fromIndex in this&&this[fromIndex]===match){return fromIndex}}return -1}});loiot.array.extend({contains:function(item){return !!~this.indexOf(item)}});Array.prototype.each=function(iterator,context){return loiot.each(this,iterator,context)};Array.prototype.forEach=function(iterator,context){return loiot.forEach(this,iterator,context)};loiot.array.extend({empty:function(){this.length=0;return this}});Array.prototype.every=function(iterator,context){loiot.check("function(,.+)?","loiot.array.every");var i,n;for(i=0,n=this.length;i<n;i++){if(!iterator.call(context||this,this[i],i,this)){return false}}return true};Array.prototype.filter=function(iterator,context){var result=loiot.array([]),i,n,item,index=0;if(loiot.type(iterator)==="function"){for(i=0,n=this.length;i<n;i++){item=this[i];if(iterator.call(context||this,item,i,this)===true){result[index++]=item}}}return result};loiot.array.extend({find:function(iterator){var i,item,n=this.length;if(loiot.type(iterator)=="function"){for(i=0;i<n;i++){item=this[i];if(iterator.call(this,item,i,this)===true){return item}}}return null}});loiot.array.extend({hash:function(values){var result={},vl=values&&values.length,i,n;for(i=0,n=this.length;i<n;i++){result[this[i]]=(vl&&vl>i)?values[i]:true}return result}});loiot.array.extend({lastIndexOf:function(match,fromIndex){loiot.check(".+(,number)?","loiot.array.lastIndexOf");var len=this.length;(!(fromIndex=fromIndex|0)||fromIndex>=len)&&(fromIndex=len-1);fromIndex<0&&(fromIndex+=len);for(;fromIndex>=0;fromIndex--){if(fromIndex in this&&this[fromIndex]===match){return fromIndex}}return -1}});Array.prototype.map=function(iterator,context){loiot.check("function(,.+)?","loiot.array.map");var i,n,array=loiot.array([]);for(i=0,n=this.length;i<n;i++){array[i]=iterator.call(context||this,this[i],i,this)}return array};Array.prototype.reduce=function(iterator,initializer){loiot.check("function(,.+)?","loiot.array.reduce");var i=0,n=this.length,found=false;if(typeof initializer=="undefined"){initializer=this[i++];if(typeof initializer=="undefined"){return}}for(;i<n;i++){initializer=iterator(initializer,this[i],i,this)}return initializer};loiot.array.extend({remove:function(match){var n=this.length;while(n--){if(this[n]===match){this.splice(n,1)}}return this}});loiot.array.extend({removeAt:function(index){loiot.check("number","loiot.array.removeAt");return this.splice(index,1)[0]}});Array.prototype.some=function(iterator,context){loiot.check("function(,.+)?","loiot.array.some");var i,n;for(i=0,n=this.length;i<n;i++){if(iterator.call(context||this,this[i],i,this)){return true}}return false};loiot.array.extend({unique:function(fn){var len=this.length,result=this.slice(0),i,datum;if("function"!=typeof fn){fn=function(item1,item2){return item1===item2}}while(--len>0){datum=result[len];i=len;while(i--){if(fn(datum,result[i])){result.splice(len,1);break}}}len=this.length=result.length;for(i=0;i<len;i++){this[i]=result[i]}return this}});loiot.browser=loiot.browser||{};loiot.browser.isStrict=loiot.browser.isStrict||document.compatMode=="CSS1Compat";loiot.browser.isGecko=loiot.browser.isGecko||/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);loiot.browser.isWebkit=loiot.browser.isWebkit||/webkit/i.test(navigator.userAgent);loiot.browser.chrome=loiot.browser.chrome||/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp["$1"]:undefined;loiot.browser.firefox=loiot.browser.firefox||/firefox\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp["$1"]:undefined;loiot.browser.ie=loiot.browser.ie||(/msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["$1"]):undefined);loiot.browser.maxthon=loiot.browser.maxthon||(function(){try{if(/(\d+\.\d+)/.test(external.max_version)){return +RegExp["$1"]}}catch(e){}return undefined})();loiot.browser.opera=loiot.browser.opera||/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp["$1"]||RegExp["$1"]):undefined;loiot.browser.safari=loiot.browser.safari||/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)?+(RegExp["$1"]||RegExp["$1"]):undefined;loiot.cookie=loiot.cookie||{};loiot.cookie._isValidKey=function(key){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$')).test(key)};loiot.cookie.getRaw=function(key){if(loiot.cookie._isValidKey(key)){var reg=new RegExp("(^| )"+key+"=([^;]*)(;|$)"),result=reg.exec(document.cookie);if(result){return result[2]||null}}return null};loiot.cookie.get=function(key){var value=loiot.cookie.getRaw(key);if("string"==typeof value){value=decodeURIComponent(value);return value}return null};loiot.cookie.setRaw=function(key,value,options){if(!loiot.cookie._isValidKey(key)){return}options=options||{};var expires=options.expires;if("number"==typeof options.expires){expires=new Date();expires.setTime(expires.getTime()+options.expires)}document.cookie=key+"="+value+(options.path?"; path="+options.path:"")+(expires?"; expires="+expires.toGMTString():"")+(options.domain?"; domain="+options.domain:"")+(options.secure?"; secure":"")};loiot.cookie.set=function(key,value,options){loiot.cookie.setRaw(key,encodeURIComponent(value),options)};loiot.cookie.remove=function(key,options){options=options||{};options.expires=new Date(0);loiot.cookie.setRaw(key,"",options)};loiot.date=loiot.date||{};loiot.date.format=function(source,pattern){if("string"!=typeof pattern){return source.toString()}function replacer(patternPart,result){pattern=pattern.replace(patternPart,result)}var pad=loiot.number.pad,year=source.getFullYear(),month=source.getMonth()+1,date2=source.getDate(),hours=source.getHours(),minutes=source.getMinutes(),seconds=source.getSeconds();replacer(/yyyy/g,pad(year,4));replacer(/yy/g,pad(parseInt(year.toString().slice(2),10),2));replacer(/MM/g,pad(month,2));replacer(/M/g,month);replacer(/dd/g,pad(date2,2));replacer(/d/g,date2);replacer(/HH/g,pad(hours,2));replacer(/H/g,hours);replacer(/hh/g,pad(hours%12,2));replacer(/h/g,hours%12);replacer(/mm/g,pad(minutes,2));replacer(/m/g,minutes);replacer(/ss/g,pad(seconds,2));replacer(/s/g,seconds);return pattern};loiot.date.parse=function(source){var reg=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof source){if(reg.test(source)||isNaN(Date.parse(source))){var d=source.split(/ |T/),d1=d.length>1?d[1].split(/[^\d]/):[0,0,0],d0=d[0].split(/[^\d]/);return new Date(d0[0]-0,d0[1]-1,d0[2]-0,d1[0]-0,d1[1]-0,d1[2]-0)}else{return new Date(source)}}return new Date()};loiot.createChain("fn",function(fn){return new loiot.fn.$Fn(~"function|string".indexOf(loiot.type(fn))?fn:function(){})},function(fn){this.fn=fn});loiot.fn.extend({bind:function(scope){var func=this.fn,xargs=arguments.length>1?Array.prototype.slice.call(arguments,1):null;return function(){var fn=loiot.type(func)==="string"?scope[func]:func,args=xargs?xargs.concat(Array.prototype.slice.call(arguments,0)):arguments;return fn.apply(scope||fn,args)}}});loiot.json=loiot.json||{};loiot.json.parse=function(data){return(new Function("return ("+data+")"))()};loiot.json.stringify=(function(){var escapeMap={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function encodeString(source){if(/["\\\x00-\x1f]/.test(source)){source=source.replace(/["\\\x00-\x1f]/g,function(match){var c=escapeMap[match];if(c){return c}c=match.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+source+'"'}function encodeArray(source){var result=["["],l=source.length,preComma,i,item;for(i=0;i<l;i++){item=source[i];switch(typeof item){case"undefined":case"function":case"unknown":break;default:if(preComma){result.push(",")}result.push(loiot.json.stringify(item));preComma=1}}result.push("]");return result.join("")}function pad(source){return source<10?"0"+source:source}function encodeDate(source){return'"'+source.getFullYear()+"-"+pad(source.getMonth()+1)+"-"+pad(source.getDate())+"T"+pad(source.getHours())+":"+pad(source.getMinutes())+":"+pad(source.getSeconds())+'"'}return function(value){switch(typeof value){case"undefined":return"undefined";case"number":return isFinite(value)?String(value):"null";case"string":return encodeString(value);case"boolean":return String(value);default:if(value===null){return"null"}else{if(loiot.type(value)==="array"){return encodeArray(value)}else{if(loiot.type(value)==="date"){return encodeDate(value)}else{var result=["{"],encode=loiot.json.stringify,preComma,item;for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){item=value[key];switch(typeof item){case"undefined":case"unknown":case"function":break;default:if(preComma){result.push(",")}preComma=1;result.push(encode(key)+":"+encode(item))}}}result.push("}");return result.join("")}}}}}})();loiot.createChain("number",function(number){var nan=parseFloat(number),val=isNaN(nan)?nan:number,clazz=typeof val==="number"?Number:String,pro=clazz.prototype;val=new clazz(val);loiot.forEach(loiot.number.$Number.prototype,function(value,key){pro[key]||(val[key]=value)});return val});loiot.number.extend({comma:function(length){var source=this;if(!length||length<1){length=3}source=String(source).split(".");source[0]=source[0].replace(new RegExp("(\\d)(?=(\\d{"+length+"})+$)","ig"),"$1,");return source.join(".")}});loiot.number.extend({pad:function(length){var source=this;var pre="",negative=(source<0),string=String(Math.abs(source));if(string.length<length){pre=(new Array(length-string.length+1)).join("0")}return(negative?"-":"")+pre+string}});loiot.number.randomInt=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)};loiot.object=loiot.object||{};loiot.object.isPlain=loiot.isPlainObject;loiot.object.extend=loiot.extend;loiot.object.clone=function(source){var result=source,i,len;if(!source||source instanceof Number||source instanceof String||source instanceof Boolean){return result}else{if(loiot.lang.isArray(source)){result=[];var resultLen=0;for(i=0,len=source.length;i<len;i++){result[resultLen++]=loiot.object.clone(source[i])}}else{if(loiot.object.isPlain(source)){result={};for(i in source){if(source.hasOwnProperty(i)){result[i]=loiot.object.clone(source[i])}}}}}return result};loiot.object.each=function(source,iterator){var returnValue,key,item;if("function"==typeof iterator){for(key in source){if(source.hasOwnProperty(key)){item=source[key];returnValue=iterator.call(source,item,key);if(returnValue===false){break}}}}return source};loiot.object.isEmpty=function(obj){var ret=true;if("[object Array]"===Object.prototype.toString.call(obj)){ret=!obj.length}else{obj=new Object(obj);for(var key in obj){return false}}return ret};loiot.object.keys=function(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=k}}return result};loiot.object.map=function(source,iterator){var results={};for(var key in source){if(source.hasOwnProperty(key)){results[key]=iterator(source[key],key)}}return results};loiot.object.merge=function(){function isPlainObject(source){return loiot.lang.isObject(source)&&!loiot.lang.isFunction(source)}function mergeItem(target,source,index,overwrite,recursive){if(source.hasOwnProperty(index)){if(recursive&&isPlainObject(target[index])){loiot.object.merge(target[index],source[index],{overwrite:overwrite,recursive:recursive})}else{if(overwrite||!(index in target)){target[index]=source[index]}}}}return function(target,source,opt_options){var i=0,options=opt_options||{},overwrite=options.overwrite,whiteList=options.whiteList,recursive=options.recursive,len;if(whiteList&&whiteList.length){len=whiteList.length;for(;i<len;++i){mergeItem(target,source,whiteList[i],overwrite,recursive)}}else{for(i in source){mergeItem(target,source,i,overwrite,recursive)}}return target}}();loiot.object.values=function(source){var result=[],resultLen=0,k;for(k in source){if(source.hasOwnProperty(k)){result[resultLen++]=source[k]}}return result};loiot.platform=loiot.platform||{};loiot.platform.isAndroid=loiot.platform.isAndroid||(!!~navigator.userAgent.indexOf("Android"));loiot.platform.isIpad=loiot.platform.isIpad||(!!~navigator.userAgent.indexOf("iPad"));loiot.platform.isIphone=loiot.platform.isIphone||(!!~navigator.userAgent.indexOf("iPhone"));loiot.platform.isLinux=loiot.platform.isLinux||(!!~navigator.userAgent.indexOf("Linux"));loiot.platform.isMacintosh=loiot.platform.isMacintosh||(!!~navigator.userAgent.indexOf("Macintosh"));loiot.platform.isWindows=loiot.platform.isWindows||(!!~navigator.userAgent.indexOf("Windows"));loiot.platform.isX11=loiot.platform.isX11||(!!~navigator.userAgent.indexOf("X11"));loiot.createChain("string",function(string){var type=loiot.type(string),str=new String(~"string|number".indexOf(type)?string:type),pro=String.prototype;loiot.forEach(loiot.string.$String.prototype,function(fn,key){pro[key]||(str[key]=fn)});return str});loiot.string.extend({decodeHTML:function(){var str=this.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return str.replace(/&#([\d]+);/g,function(_0,_1){return String.fromCharCode(parseInt(_1,10))})}});loiot.string.extend({encodeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}});loiot.string.extend({escapeReg:function(){return this.replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\\x241")}});loiot.string.extend({format:function(opts){var source=this.valueOf(),data=Array.prototype.slice.call(arguments,0),toString=Object.prototype.toString;if(data.length){data=data.length==1?(opts!==null&&(/\[object Array\]|\[object Object\]/.test(toString.call(opts)))?opts:data):data;return source.replace(/#\{(.+?)\}/g,function(match,key){var replacer=data[key];if("[object Function]"==toString.call(replacer)){replacer=replacer(key)}return("undefined"==typeof replacer?"":replacer)})}return source}});loiot.string.extend({formatColor:function(){var reg1=/^\#[\da-f]{6}$/i,reg2=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i,keyword={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff0",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff"};return function(){var color=this.valueOf();if(reg1.test(color)){return color}else{if(reg2.test(color)){for(var s,i=1,color="#";i<4;i++){s=parseInt(RegExp["$"+i]).toString(16);color+=("00"+s).substr(s.length)}return color}else{if(/^\#[\da-f]{3}$/.test(color)){var s1=color.charAt(1),s2=color.charAt(2),s3=color.charAt(3);return"#"+s1+s1+s2+s2+s3+s3}else{if(keyword[color]){return keyword[color]}}}}return""}}()});loiot.string.extend({stripTags:function(){return(this||"").replace(/<[^>]+>/g,"")}});loiot.string.extend({getByteLength:function(){return this.replace(/[^\x00-\xff]/g,"ci").length}});loiot.string.extend({subByte:function(len,tail){loiot.check("number(,string)?$","loiot.string.subByte");if(len<0||this.getByteLength()<=len){return this.valueOf()}var source=this.substr(0,len).replace(/([^\x00-\xff])/g,"$1 ").substr(0,len).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1");return source+(tail||"")}});loiot.string.extend({toCamelCase:function(){var source=this.valueOf();if(source.indexOf("-")<0&&source.indexOf("_")<0){return source}return source.replace(/[-_][^-_]/g,function(match){return match.charAt(1).toUpperCase()})}});loiot.string.extend({toHalfWidth:function(){return this.replace(/[\uFF01-\uFF5E]/g,function(c){return String.fromCharCode(c.charCodeAt(0)-65248)}).replace(/\u3000/g," ")}});loiot.string.extend({trim:function(){var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return function(){return this.replace(trimer,"")}}()});loiot.string.extend({wbr:function(){return this.replace(/(?:<[^>]+>)|(?:&#?[0-9a-z]{2,6};)|(.{1})/gi,"$&<wbr>").replace(/><wbr>/g,">")}});